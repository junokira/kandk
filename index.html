<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Kwality & Klarity</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Kwality & Klarity is a South African online/digital publication platform founded by Tumisho Mathekgane. The platform focuses on documentation & promotion of young artist with music, fashion or related pop cultures.">
    <meta name="keywords" content="Kwality & Klarity, quality, clarity, business, services, newsletter, updates, music, fashion, pop culture, FAQ, frequently asked questions, digital publication">
    <link rel="canonical" href="https://www.kwalityandklarity.com/"> <!-- Replace with your actual domain -->
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:title" content="Kwality & Klarity">
    <meta property="og:description" content="Kwality & Klarity is a South African online/digital publication platform founded by Tumisho Mathekgane. The platform focuses on documentation & promotion of young artist with music, fashion or related pop cultures.">
    <meta property="og:image" content="https://i.ibb.co/Fqd8fPfS/k-k-png.png"> <!-- Use your main logo image URL -->
    <meta property="og:url" content="https://www.kwalityandklarity.com/"> <!-- Replace with your actual domain -->
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@KwalityKlarity"> <!-- Replace with your Twitter handle if applicable -->
    <meta name="twitter:title" content="Kwality & Klarity">
    <meta name="twitter:description" content="Kwality & Klarity is a South African online/digital publication platform founded by Tumisho Mathekgane. The platform focuses on documentation & promotion of young artist with music, fashion or related pop cultures.">
    <meta name="twitter:image" content="https://i.ibb.co/Fqd8fPfS/k-k-png.png"> <!-- Use your main logo image URL -->

    <!-- Favicon -->
    <link rel="icon" href="https://i.ibb.co/Jj74RR2Z/IMG-9717.png" type="image/png"> <!-- Use your small logo or a dedicated favicon -->
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        /* Using a custom font for a retro/tech aesthetic */
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        body {
            font-family: 'VT323', monospace;
            min-height: 100vh;
        }

        /* Utility class to disable scrolling on the body */
        .no-scroll {
            overflow: hidden;
        }

        /* Class to center the main content area vertically */
        .flex-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        /* New class for the homepage layout */
        .homepage-layout {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            min-height: 100vh;
        }

        /* Footer styling from user's provided code */
        footer {
            font-size: 0.9rem;
            text-align: center;
            width: 100%;
            z-index: 1;
        }

        .footer-email {
            margin-bottom: 0.6rem;
        }

        .social-icons {
            margin: 0 12px;
            text-decoration: none;
            color: inherit;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: color 0.5s;
        }

        .social-icons svg,
        .social-icons img {
            width: 28px;
            height: 28px;
            fill: currentColor;
            transition: fill 0.5s;
        }
        
        /* Updated styling for the homepage on mobile */
        @media (max-width: 768px) {
            body.homepage .home-page-mobile-footer {
                position: relative;
            }
            body.homepage {
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                min-height: 100vh;
                padding-bottom: 90px; /* Increased padding to give the footer more space */
            }
            body.homepage #main-nav {
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body class="bg-white text-black min-h-screen homepage-layout no-scroll homepage">

    <!-- Header Section -->
    <div class="flex justify-center p-4">
        <!-- Logo is now a proper hash link for deep-linking -->
        <a href="#/home" class="cursor-pointer" onclick="event.preventDefault(); showPage('home')">
            <!-- Increased logo size on medium and larger screens -->
            <img alt="Black globe icon with star on top right" class="w-32 h-32 md:w-48 md:h-48" height="128" src="https://i.ibb.co/mKbxmzd/K-K-black.webp" width="128"/>
        </a>
    </div>

    <!-- Navigation Menu -->
    <nav id="main-nav" class="flex flex-col items-center md:flex-row md:justify-center space-y-8 md:space-y-0 md:space-x-16 max-w-full px-4 text-3xl md:text-4xl lg:text-5xl leading-[36px] z-10">
        <!-- The nav items are now proper hash links for better accessibility and SEO -->
        <a href="#/blog" class="whitespace-nowrap cursor-pointer hover:underline text-center" onclick="event.preventDefault(); showPage('blog')">
            BLOG
        </a>
        <a href="#/podcast" class="whitespace-nowrap cursor-pointer hover:underline text-center" onclick="event.preventDefault(); showPage('podcast')">
            PODCAST
        </a>
        <a href="#/prospect-form" class="whitespace-nowrap cursor-pointer hover:underline text-center" onclick="event.preventDefault(); showPage('prospect-form')">
            PROSPECT FORM
        </a>
        <a href="#/about" class="whitespace-nowrap cursor-pointer hover:underline text-center" onclick="event.preventDefault(); showPage('about')">
            ABOUT
        </a>
    </nav>
    
    <!-- Main content area where pages will be displayed -->
    <div id="main-content" class="flex-grow p-8 sm:p-16 flex justify-center hidden">
        <!-- Content will be injected here by JavaScript -->
    </div>

    <!-- Footer with social media icons from user's provided code -->
    <footer class="mt-16 text-black home-page-mobile-footer">
        <div class="footer-email">
            <a href="mailto:info@kwalityandklarity.com" style="color: inherit; text-decoration: none;">
                info@kwalityandklarity.com
            </a>
        </div>
        <div class="social-icons">
            <!-- Added rel="noopener noreferrer" for security on external links -->
            <a href="https://www.instagram.com/kwalityandklarity/" target="_blank" rel="noopener noreferrer" title="Instagram">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.25 5.25 0 0 1 21.5 7.25v8.5A5.25 5.25 0 0 1 16.25 21h-8.5A5.25 5.25 0 0 1 2.5 15.75v-8.5A5.25 5.25 0 0 1 7.75 2zm0 1.5A3.75 3.75 0 0 0 4 7.25v8.5A3.75 3.75 0 0 0 7.75 19.5h8.5A3.75 3.75 0 0 0 20 15.75v-8.5A3.75 3.75 0 0 0 16.25 3.5h-8.5zm9.25 2.25a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z"/></svg>
            </a>
            <a href="https://x.com/KwalityKlarity" target="_blank" rel="noopener noreferrer" title="X">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            </a>
        </div>
        <div>Â© 2025 Kwality & Klarity. All rights reserved.</div>
    </footer>

    <script>
        // If Netlify Identity sends an invite/recovery token, forward it to /admin/
        if (/^#(invite_token|recovery_token)=/.test(window.location.hash)) {
            window.location.replace('/admin/' + window.location.hash);
        }

        const whiteLogoUrl = 'https://i.ibb.co/Jj74RR2Z/IMG-9717.png';

        // Store the HTML for each page in JavaScript variables
        const pages = {
            'home': ``,
            'blog': `
                <div class="flex flex-col items-center text-center w-full">
                    <h2 class="text-4xl font-bold mb-8 text-center">THE BLOG</h2>
                    <div id="filter-container" class="flex flex-wrap justify-center space-x-4 sm:space-x-8 mb-8 text-2xl">
                        <button class="filter-btn border-b-2 border-black pb-1 focus:outline-none" data-filter="all">All</button>
                        <button class="filter-btn hover:underline focus:outline-none" data-filter="fashion">Fashion</button>
                        <button class="filter-btn hover:underline focus:outline-none" data-filter="music">Music</button>
                        <button class="filter-btn hover:underline focus:outline-none" data-filter="events">Events</button>
                        <button class="filter-btn hover:underline focus:outline-none" data-filter="discourse">Discourse</button>
                    </div>
                    <!-- Updated blog posts container for a two-column grid on desktop -->
                    <div id="blog-posts-container" class="grid grid-cols-1 md:grid-cols-2 gap-8 text-center w-full max-w-5xl mt-8">
                        <!-- Blog posts will be injected here by filterPosts() -->
                    </div>
                </div>
            `,
            'podcast': `
                <div class="flex flex-col items-center text-center">
                    <h2 class="text-4xl font-bold mb-8">KULTURE KRONICLES</h2>
                    <p class="text-lg mb-4 max-w-2xl">
                        Explore a collection of short-form and long-form video content documenting and promoting young artists in music, fashion, and pop culture.
                    </p>
                    
                    <!-- Short-form Videos (Shorts) - added loading="lazy" for performance -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-8 w-full max-w-6xl">
                        <div class="relative w-full" style="padding-top: 177.7778%;">
                            <iframe loading="lazy" 
                                class="absolute top-0 left-0 w-full h-full"
                                src="https://www.youtube.com/embed/0k64j1Spffg" 
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div class="relative w-full" style="padding-top: 177.7778%;">
                            <iframe loading="lazy" 
                                class="absolute top-0 left-0 w-full h-full"
                                src="https://www.youtube.com/embed/E5-OfbZUc5E" 
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div class="relative w-full" style="padding-top: 177.7778%;">
                            <iframe loading="lazy" 
                                class="absolute top-0 left-0 w-full h-full"
                                src="https://www.youtube.com/embed/5jKuBE1OrEQ" 
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div class="relative w-full" style="padding-top: 177.7778%;">
                            <iframe loading="lazy" 
                                class="absolute top-0 left-0 w-full h-full"
                                src="https://www.youtube.com/embed/TNLaPAs9mmU" 
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div class="relative w-full" style="padding-top: 177.7778%;">
                            <iframe loading="lazy" 
                                class="absolute top-0 left-0 w-full h-full"
                                src="https://www.youtube.com/embed/7L9spG_p_Tc" 
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen>
                            </iframe>
                        </div>
                    </div>

                    <!-- K&K Radio (Long-form Videos) - added loading="lazy" for performance -->
                    <h3 class="text-3xl font-bold mt-16 mb-8 text-center">K&K Radio</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-6xl">
                         <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/29eVgJtfRsI" 
                                    title="Donât Be A Creative Director" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">Donât Be A Creative Director</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/jrJKnKSik6w" 
                                    title="The Return" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">The Return</p>
                        </div>
                         <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/BVjdJjVUXAc" 
                                    title="Give Yourself Time" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">Give Yourself Time</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/lFhhbx2xA1E" 
                                    title="Creativity is Life" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">Creativity is Life</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/isszwKqkCM4" 
                                    title="Fear Nothing" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">Fear Nothing</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/tsHLDkZhlvI" 
                                    title="The Importance of Self-Belief" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">The Importance of Self-Belief</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="relative w-full" style="padding-top: 56.25%;">
                                <iframe loading="lazy" 
                                    class="absolute top-0 left-0 w-full h-full"
                                    src="https://www.youtube.com/embed/qtguifcfw5c" 
                                    title="The Story" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                            <p class="mt-2 text-lg font-bold text-center">The Story</p>
                        </div>
                    </div>
                </div>
            `,
            'prospect-form': `
                <div class="flex flex-col items-center w-full max-w-lg p-4">
                    <h2 class="text-4xl font-bold mb-8 text-center">PROSPECT FORM</h2>
                    <p class="text-lg mb-8 text-center">
                        Ready to start a project? Fill out the form below and we'll get back to you!
                    </p>
                    <form class="w-full" action="https://buttondown.com/api/emails/embed-subscribe/kwality_klarity" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.com/kwality_klarity', 'popupwindow')" >
                        <div class="mb-6 text-left">
                            <label for="name" class="block text-2xl font-bold mb-2">Name</label>
                            <input type="text" id="name" name="name" class="w-full p-2 border border-black rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-black">
                        </div>
                        <div class="mb-6 text-left">
                            <label for="email" class="block text-2xl font-bold mb-2">Email</label>
                            <input type="email" name="email" id="email" class="w-full p-2 border border-black rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-black">
                        </div>
                        <div class="mb-6 text-left">
                            <label for="message" class="block text-2xl font-bold mb-2">Message</label>
                            <textarea id="message" name="message" rows="4" class="w-full p-2 border border-black rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-black"></textarea>
                        </div>
                        <button type="submit" class="mx-auto block bg-black text-white px-8 py-4 text-2xl font-bold hover:bg-gray-800 transition-colors rounded-lg">
                            SUBMIT
                        </button>
                    </form>
                </div>
            `,
            'about': `
                <div class="flex flex-col items-center text-center">
                    <h2 class="text-4xl font-bold mb-8">ABOUT KWALITY & KLARITY</h2>
                    <p class="text-lg mb-4 max-w-2xl">
                        Kwality & Klarity is a South African online/digital publication platform founded by Tumisho Mathekgane. The platform focuses on documentation & promotion of young artist with music, fashion or related pop cultures.
                    </p>

                    <!-- Newsletter Section with old design -->
                    <div class="w-full max-w-lg mt-8 p-4 border-2 border-black rounded-lg shadow-[4px_4px_0_0_#000]">
                        <h3 class="text-3xl font-bold mb-4">JOIN OUR NEWSLETTER</h3>
                        <p class="text-lg mb-4">
                            Stay updated with our latest posts and announcements.
                        </p>
                        <form action="https://buttondown.com/api/emails/embed-subscribe/kwality_klarity" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.com/kwality_klarity', 'popupwindow')" >
                            <div class="mb-4 text-left">
                                <label for="email-newsletter" class="block text-2xl font-bold mb-2">Email</label>
                                <input type="email" name="email" id="email-newsletter" class="w-full p-2 border border-black rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-black">
                            </div>
                            <button type="submit" class="mx-auto block bg-black text-white px-8 py-4 text-2xl font-bold hover:bg-gray-800 transition-colors rounded-lg">
                                SUBSCRIBE
                            </button>
                        </form>
                    </div>
                    
                    <!-- FAQ Section -->
                    <h3 class="text-3xl font-bold mt-8 mb-4">FAQ</h3>
                    <div class="space-y-4 text-left w-full max-w-2xl">
                        <div class="border p-4 rounded-lg border-2 border-black shadow-[4px_4px_0_0_#000]">
                            <h4 class="font-bold text-2xl">What kind of content do you produce?</h4>
                            <p class="text-lg">We produce a wide range of content, including interviews, articles, and podcasts, all centered around South African music, fashion, and pop culture.</p>
                        </div>
                        <div class="border p-4 rounded-lg border-2 border-black shadow-[4px_4px_0_0_#000]">
                            <h4 class="font-bold text-2xl">How can I be featured?</h4>
                            <p class="text-lg">We're always looking for new talent! You can submit your work through our Prospect Form.</p>
                        </div>
                        <div class="border p-4 rounded-lg border-2 border-black shadow-[4px_4px_0_0_#000]">
                            <h4 class="font-bold text-2xl">Can I collaborate with Kwality & Klarity?</h4>
                            <p class="text-lg">Yes, we are open to collaborations. Please reach out to us via our email info@kwalityandklarity.com with your proposal.</p>
                        </div>
                    </div>
                </div>
            `,
            'full-post': ``, // This is now a dynamically generated page and no longer needs a static template
        };

        const blogPosts = [
            {
                id: 1,
                title: "Editor\'s Edit: Outlander Magazine for PUMA",
                date: "2024-05-15",
                category: "fashion",
                imageUrl: "https://i.ibb.co/GfFrbq3G/Screenshot-2025-08-09-at-11-42-42-AM.png",
                fullContent: `
                <p>In a dynamic collaboration, Outlander Magazine has crafted an editorial masterpiece for PUMA that redefines the intersection of sportswear and high fashion. This piece delves into the creative vision and meticulous execution behind the campaign, showcasing how the two brands converged to tell a compelling visual story.</p>
                <p>We explore the styling choices, the choice of location, and the bold photography that together elevate PUMA's latest collection. This article is a must-read for anyone interested in the artistry of brand partnerships and the future of fashion editorial.</p>
                `,
                snippet: "An in-depth look at Outlander Magazine's creative direction for its latest collaboration with PUMA, a masterclass in fashion and storytelling.",
            },
            {
                id: 2,
                title: "Pharrell\'s Louis Vuitton Puffer: A Statement Piece",
                date: "2024-06-20",
                category: "fashion",
                imageUrl: "https://i.ibb.co/Df4NWLV4/Screenshot-2025-08-04-at-9-09-56-PM.png",
                fullContent: `
                <p>Pharrell Williams' iconic Louis Vuitton puffer jacket has become more than just a piece of outerwearâit's a cultural artifact. This article analyzes how this single garment has influenced the conversation around luxury streetwear and personal expression.</p>
                <p>We examine the design's intricate details, its star-studded appearances, and its broader impact on the fashion world. The LV puffer is not just a seasonal trend; itâs a powerful statement on the evolving identity of modern luxury.</p>
                `,
                snippet: "Pharrell Williams' iconic LV puffer jacket is a commentary on luxury, streetwear, and personal expression. We analyze its cultural impact and its influence on modern fashion.",
            },
            {
                id: 3,
                title: "The Rise of South Africa\'s Sonic Pioneers",
                date: "2024-07-01",
                category: "music",
                imageUrl: "https://i.ibb.co/MkLWPS4J/Screenshot-2025-08-04-at-9-09-47-PM.png",
                fullContent: `
                <p>A new wave of music is emerging from South Africa, led by a generation of producers and artists who are crafting a unique, genre-bending sound. We dive into the burgeoning scene, exploring the creative forces and innovative sounds that are capturing local and international attention.</p>
                <p>This article shines a light on the sonic pioneers who are blending traditional African rhythms with modern electronic beats, hip-hop, and pop sensibilities to create something truly original. We discuss their journey from underground talents to celebrated artists defining a new era of music.</p>
                `,
                snippet: "From the underground to the global stage, we highlight the young South African producers and musicians who are defining a new sound for a generation.",
            },
            {
                id: 4,
                title: "Discourse: The Power of Self-Belief",
                date: "2024-07-10",
                category: "discourse",
                imageUrl: "https://i.ibb.co/FVTp31X/IMG-9514.png",
                fullContent: `
                <p>In the creative world, the most significant barrier to success isn't a lack of talent or resourcesâit's often self-doubt. This discourse explores the crucial role of self-belief in an artist's journey, offering insights into how to cultivate a resilient mindset.</p>
                <p>We delve into the psychology behind imposter syndrome and provide practical, actionable strategies for building confidence and trusting your creative instincts. This is a conversation about the transformative power of believing in yourself and how it can unlock your true potential.</p>
                `,
                snippet: "In the creative world, self-doubt can be the biggest barrier. This discourse explores the mindset and habits of artists who have mastered self-belief to fuel their work.",
            },
            {
                id: 5,
                title: "Yamukeiwa\'s Styling Masterclass on Sportscene Campaign",
                date: "2024-07-20",
                category: "fashion",
                imageUrl: "https://i.ibb.co/7xVPQGBS/Screenshot-2025-08-04-at-9-52-18-PM.webp",
                fullContent: `
                <p>Renowned stylist Yamukeiwa offers an exclusive behind-the-scenes look at his masterclass styling for the latest Sportscene campaign. In this article, we dissect his unique creative process, from mood boards to final execution.</p>
                <p>Yamukeiwa shares his insights on how he brought the brand's vision to life while infusing his own distinctive sartorial artistry. This is a fascinating look at the synergy between a stylist's vision and a brand's identity.</p>
                `,
                snippet: "Yamukeiwa breaks down the creative process behind the scenes of his styling for the latest Sportscene campaign, showcasing his unique vision and artistry.",
            },
            {
                id: 6,
                title: "FC Barcelona x Kobe Bryant Brand: A Historic Collaboration",
                date: "2024-07-28",
                category: "fashion",
                imageUrl: "https://i.ibb.co/XxY8NKkJ/Screenshot-2025-08-04-at-9-52-41-PM.webp",
                fullContent: `
                <p>In an unprecedented fusion of sports and fashion, FC Barcelona and the iconic Kobe Bryant brand have joined forces. This article details the historic collaboration, exploring the collection that celebrates the legacy of both institutions.</p>
                <p>We analyze the design elements, the symbolism, and the cultural significance of this partnership. The collaboration pays homage to both a football titan and a basketball legend, creating a collection that is both a tribute and a statement piece.</p>
                `,
                snippet: "A deep dive into the unexpected and historic fashion collaboration between the legendary football club FC Barcelona and the iconic Kobe Bryant brand.",
            },
            {
                id: 7,
                title: "The K&K Radio x Puma Experience",
                date: "2024-08-01",
                category: "events",
                imageUrl: "https://i.ibb.co/Jj74RR2Z/IMG-9717.png",
                fullContent: `
                <p>Our exclusive partnership with Puma culminated in a spectacular K&K Radio event that brought together the best of South African music and fashion. This article recaps the experience, highlighting the electric atmosphere and the vibrant community that came together to celebrate creativity.</p>
                <p>We explore the moments that made the night special, from live performances to engaging conversations, and reflect on the power of creative synergy between brands and local platforms.</p>
                `,
                snippet: "A recap of our exclusive partnership with Puma, celebrating a fusion of music, fashion, and culture with a live event that connected our community.",
            }
        ];
        
        let currentFilter = 'all';

        // Helper function to fetch posts from a JSON file and merge with existing ones.
        // It fetches a JSON file, maps the data to the correct format, and merges it with the local posts.
        // The combined list is then sorted by date in descending order.
        async function loadCmsPostsAndMerge(existingPosts) {
            try {
                const res = await fetch('/posts.json', { cache: 'no-store' });
                if (!res.ok) throw new Error('Failed to fetch /posts.json');
                const raw = await res.json();
                const cmsPosts = Array.isArray(raw) ? raw : raw.posts || [];
                
                const cmsAsCards = cmsPosts.map(p => ({
                    title: p.title,
                    date: p.date,
                    category: (p.category || '').toLowerCase(),
                    imageUrl: p.cover || '',
                    snippet: p.excerpt || '',
                    fullContent: p.body || p.excerpt || '',
                    url: p.url
                }));
                return [...cmsAsCards, ...existingPosts].sort(
                    (a, b) => new Date(b.date) - new Date(a.date)
                );
            } catch (e) {
                console.warn('CMS posts failed to load:', e);
                return existingPosts;
            }
        }

        // Function to render blog posts based on the filter
        function renderBlogPosts(posts) {
            const container = document.getElementById('blog-posts-container');
            container.innerHTML = ''; // Clear previous content

            const filteredPosts = posts.filter(post => {
                if (currentFilter === 'all') {
                    return true;
                }
                return post.category.toLowerCase() === currentFilter;
            });
            
            // Gracefully handle the case where there are no posts to display
            if (!filteredPosts.length) {
                container.innerHTML = `<p class="text-lg text-center w-full">No posts yet in this category.</p>`;
                return;
            }

            // Placeholder image for posts that don't have a cover
            const placeholderImageUrl = 'https://placehold.co/400x200/cccccc/333333?text=K%26K';

            filteredPosts.forEach(post => {
                const imageUrl = post.imageUrl || placeholderImageUrl;
                const postCard = `
                    <!-- Added rounded-lg class here to the card container -->
                    <div class="blog-post-card flex flex-col items-center p-4 border-2 border-black shadow-[4px_4px_0_0_#000] text-left hover:shadow-[8px_8px_0_0_#000] transition-shadow duration-300 cursor-pointer rounded-lg">
                        <div class="relative w-full">
                            <!-- Removed rounded-lg from the image to keep it square -->
                            <img src="${imageUrl}" alt="${post.title}" class="w-full h-auto mb-4" loading="lazy">
                            <!-- Adjusted bottom position to move the logo up -->
                            <div class="absolute bottom-7 right-2 w-12 h-12">
                                <img src="${whiteLogoUrl}" alt="Kwality & Klarity Logo" class="w-full h-full">
                            </div>
                        </div>
                        <!-- Guard against missing dates from CMS posts -->
                        <p class="text-xs text-gray-500 mb-1">${post.date ? String(post.date).split('T')[0] : ''}</p>
                        <h3 class="text-xl font-bold mb-2 uppercase">${post.title}</h3>
                        <p class="text-base">${post.snippet}</p>
                    </div>
                `;
                
                // Fix: use a temporary wrapper to get the firstElementChild instead of firstChild
                const wrapper = document.createElement('div');
                wrapper.innerHTML = postCard.trim(); // strip leading newline
                const cardEl = wrapper.firstElementChild; // the actual <div class="blog-post-card">
                
                if (post.url) {
                    cardEl.addEventListener('click', () => (window.location.href = post.url));
                } else {
                    cardEl.addEventListener('click', () => showFullPost(post));
                }

                container.appendChild(cardEl);
            });
        }
        
        // Make filtering use the merged list (not the old blogPosts)
        function filterPosts(filter) {
            currentFilter = filter;
            const buttons = document.querySelectorAll('#filter-container .filter-btn');
            buttons.forEach(button => {
                if (button.dataset.filter === filter) {
                    button.classList.add('border-b-2', 'border-black', 'pb-1');
                    button.classList.remove('hover:underline');
                    button.setAttribute('aria-current', 'page'); // Indicate active filter for accessibility
                } else {
                    button.classList.remove('border-b-2', 'border-black', 'pb-1');
                    button.classList.add('hover:underline');
                    button.setAttribute('aria-current', 'false');
                }
            });
            // use merged set
            renderBlogPosts(window.__allPosts || blogPosts);
        }

        // Function to setup filter button listeners
        function setupFilterListeners() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterPosts(button.dataset.filter);
                });
            });
        }

        // Function to show the full post content
        function showFullPost(post) {
            const mainContent = document.getElementById('main-content');
            document.getElementById('main-nav').classList.remove('hidden');

            // Ensure homepage-only classes are OFF in post view
            document.body.classList.remove('homepage', 'no-scroll', 'homepage-layout');

            mainContent.innerHTML = `
                <div class="max-w-4xl mx-auto text-center p-4">
                    <button onclick="showPage('blog')" class="mb-4 text-2xl font-bold hover:underline transition-colors">
                        â BACK TO BLOG
                    </button>
                    <h2 class="text-4xl font-bold mb-4 uppercase">${post.title}</h2>
                    <p class="text-md text-gray-500 mb-8">${post.date ? String(post.date).split('T')[0] : ''} | ${post.category}</p>
                    <div class="relative w-full">
                        <img src="${post.imageUrl}" alt="${post.title}" class="w-full h-auto mb-8 border-2 border-black shadow-[4px_4px_0_0_#000]">
                        <div class="absolute bottom-4 right-4 w-12 h-12">
                            <img src="${whiteLogoUrl}" alt="Kwality & Klarity Logo" class="w-full h-full">
                        </div>
                    </div>
                    <div class="text-lg text-left leading-relaxed">
                        ${post.fullContent}
                    </div>
                </div>
            `;
            document.getElementById('main-nav').classList.add('hidden');
            mainContent.classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Main function to switch between pages
        function showPage(pageId) {
            const mainContent = document.getElementById('main-content');
            document.getElementById('main-nav').classList.remove('hidden');

            // Remove homepage-only classes when switching pages
            document.body.classList.remove('homepage', 'no-scroll', 'homepage-layout');

            if (pageId === 'home') {
                // Apply homepage-only classes
                document.body.classList.add('homepage', 'no-scroll', 'homepage-layout');
                mainContent.classList.add('hidden');
            } else {
                mainContent.classList.remove('hidden');
                // Blog page now loads posts asynchronously.
                // Inject the HTML first, then fetch posts.
                if (pageId === 'blog') {
                    (async () => {
                        mainContent.innerHTML = pages['blog'];
                        window.__allPosts = await loadCmsPostsAndMerge(blogPosts);
                        setupFilterListeners();
                        filterPosts('all'); // Renders + applies active styles using the merged list
                    })();
                } else if (pages[pageId]) {
                    mainContent.innerHTML = pages[pageId];
                    if (pageId === 'prospect-form' || pageId === 'about') {
                        document.body.classList.add('flex-center');
                    } else {
                        document.body.classList.remove('flex-center');
                    }
                } else {
                    mainContent.innerHTML = 'Page not found!';
                }
            }
        }

        // Function to handle hash-based routing
        function routeFromHash() {
            const hash = window.location.hash;

            // Only treat hashes that start with "#/" as internal pages
            if (!hash || !hash.startsWith('#/')) {
                showPage('home');
                return;
            }

            const page = hash.slice(2) || 'home';
            showPage(page);
        }
        
        // Initial page load and hash change listener
        window.addEventListener('hashchange', routeFromHash);
        document.addEventListener('DOMContentLoaded', routeFromHash);
    </script>
</body>
</html>
